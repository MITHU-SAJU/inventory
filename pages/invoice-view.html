<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Invoice View</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/print-fixes.css">

    <style>
        body {
            background: #f4f6f9;
        }

        p {
            margin-top: 0;
            margin-bottom: 0 !important;
        }

        .invoice-container {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
        }

        table th,
        table td {
            vertical-align: middle;
        }

        /* ===================== PRINT ONLY ===================== */
        @media print {

            /* PAGE SETUP */
            @page {
                size: A4;
                margin: 6mm;
            }

            html,
            body {
                width: 210mm;
                margin: 0;
                padding: 0;
                /* allow printing engine to handle overflow so tables can split */
                overflow: visible !important;
                background: #fff !important;
            }

            /* HIDE NON-PRINT ELEMENTS */
            .no-print,
            .sidebar,
            nav,
            header,
            footer,
            button,
            a.btn {
                display: none !important;
            }

            /* REMOVE BOOTSTRAP WIDTH LIMITS */
            .container,
            .container-fluid,
            .main {
                width: 100% !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important;
            }

            /* MAIN PRINT AREA */
            .invoice-container {
                width: 100% !important;
                max-width: none !important;
                margin: 0 !important;
                padding: 8mm !important;
                /* inner spacing */
                box-shadow: none !important;
                border-radius: 0 !important;
            }

            /* ===== FORCE BOOTSTRAP GRID TO WORK IN PRINT ===== */
            .row {
                display: flex !important;
                flex-wrap: nowrap !important;
                /* KEEP 3 CARDS IN ONE ROW */
                width: 100% !important;
            }

            /* Override Bootstrap grid for print */
            .col-lg-7 {
                width: 55.555555% !important;
                /* 5 / 9 */
                flex: 0 0 55.555555% !important;
                max-width: 55.555555% !important;
            }

            .col-lg-5 {
                width: 44.444445% !important;
                /* 4 / 9 */
                flex: 0 0 44.444445% !important;
                max-width: 44.444445% !important;
            }

            .col-md-1 {
                width: 8.333333% !important;
            }

            .col-md-2 {
                width: 16.666667% !important;
            }

            .col-md-3 {
                width: 25% !important;
            }

            .col-md-4 {
                width: 33.333333% !important;
                flex: 0 0 33.333333% !important;
                max-width: 33.333333% !important;
            }

            .col-md-5 {
                width: 41.666667% !important;
            }

            .col-md-6 {
                width: 50% !important;
            }

            .col-md-7 {
                width: 58.333333% !important;
            }

            .col-md-8 {
                width: 66.666667% !important;
            }

            .col-md-9 {
                width: 75% !important;
            }

            .col-md-10 {
                width: 83.333333% !important;
            }

            .col-md-11 {
                width: 91.666667% !important;
            }

            .col-md-12 {
                width: 100% !important;
            }

            /* CARDS */
            .card {
                box-shadow: none !important;
                border: 1px solid #000 !important;
                break-inside: avoid !important;
                page-break-inside: avoid !important;
            }

            /* TABLE FIXES */
            table {
                width: 100% !important;
                border-collapse: collapse !important;
                /* allow table to break across pages between rows */
                page-break-inside: auto !important;
            }

            thead {
                display: table-header-group;
            }

            tr {
                page-break-inside: avoid !important;
            }

            /* BADGES (STATUS) */
            .badge {
                background: transparent !important;
                color: #000 !important;
                border: 1px solid #000 !important;
            }

            /* TEXT SPACING */
            p,
            h4,
            h5,
            h6 {
                margin-bottom: 6px !important;
            }

            /* LOGO SIZE */
            img {
                max-height: 60px !important;
            }
        }
    </style>

</head>

<body>
    <div class="d-flex">

        <!-- Sidebar Component -->
        <div include-html="../components/sidebar.html" class="no-print"></div>

        <!-- MAIN CONTENT -->
        <main class="main p-4 flex-grow-1">
            <div class="container">
                <div class="invoice-container">

                    <!-- ================= HEADER ================= -->
                    <div class="row align-items-center mb-3">

                        <!-- LEFT : LOGO -->
                        <div class="col-4">
                            <img src="../assets/images/logo.png" alt="Company Logo" style="max-height:60px;">
                        </div>

                        <!-- CENTER : TITLE -->
                        <div class="col-4 text-center">
                            <h4 class="fw-bold mb-0">INVOICE</h4>
                        </div>

                        <!-- RIGHT : INVOICE INFO -->
                        <div class="col-4">
                            <div class="card shadow-sm ms-auto" style="max-width:260px;">
                                <div class="card-body p-2">

                                    <!-- ROW 1 -->
                                    <p class="fw-bold mb-1">
                                        Invoice No:
                                        <span class="fw-normal">INV-001</span>
                                    </p>

                                    <p class="small mb-1">
                                        <strong>Date:</strong> 12-09-2025
                                    </p>

                                    <hr class="my-1">

                                    <!-- ROW 2 -->
                                    <p class="small mb-0">
                                        <strong>Payment:</strong> UPI
                                    </p>

                                </div>
                            </div>
                        </div>

                    </div>
                    <!-- UNDERLINE -->
                    <hr class="mt-2 ">
                    <!-- CUSTOMER DETAILS -->
                    <div class="row ">

                        <!-- FROM -->
                        <div class="col-md-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-body">
                                    <p class="fw-bold mb-1">From</p>
                                    <p class="fw-semibold ">CTRL NEXT</p>
                                    Coimbatore,<br>
                                    Tamil Nadu – 641001<br>
                                    </p>
                                    <p class="mb-0 small"><strong>GST:</strong> 33AAAAA0000A1Z5</p>
                                </div>
                            </div>
                        </div>

                        <!-- BILL TO -->
                        <div class="col-md-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-body">
                                    <p class="fw-bold mb-1">Bill To</p>
                                    <p class="fw-semibold ">ABC Traders</p>
                                    <p class="mb-1 small">
                                        Location, Address Line 1,<br>
                                        Address Line 2,<br>
                                        Chennai – 600001
                                    </p>
                                    <p class="mb-0 small"><strong>GST:</strong> 33AAAAA0000A1Z5</p>
                                </div>
                            </div>
                        </div>

                        <!-- DELIVERY ADDRESS -->
                        <div class="col-md-4">
                            <div class="card h-100 shadow-sm">
                                <div class="card-body">
                                    <p class="fw-bold mb-1">Delivery Address</p>
                                    <p class="fw-semibold">ABC Traders – Warehouse</p>
                                    <p class="mb-0 small">
                                        Plot No 21, SIDCO,<br>
                                        Tiruppur – 641603<br>
                                        Tamil Nadu
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ================= ITEM TABLE ================= -->
                    <div class="card-body mt-3">
                        <div class="table-responsive">
                            <table class="table invoice-table align-middle">
                                <thead class="table-light text-center">
                                    <tr>
                                        <th>S.No</th>
                                        <th>Particulars</th>
                                        <th>Size</th>
                                        <th>Qty</th>
                                        <th>Price</th>
                                        <th>GST %</th>
                                        <th>Value</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>

                                <tbody id="itemTableBody" class="text-center">
                                    <tr>
                                        <td>1</td>
                                        <td>Round Neck T-Shirt</td>
                                        <td>S</td>
                                        <td>2 pcs</td>
                                        <td>₹100.00</td>
                                        <td>5%</td>
                                        <td>₹200.00</td>
                                        <td>₹210.00</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>Round Neck T-Shirt</td>
                                        <td>M</td>
                                        <td>2 pcs</td>
                                        <td>₹105.00</td>
                                        <td>5%</td>
                                        <td>₹210.00</td>
                                        <td>₹220.50</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td>Round Neck T-Shirt</td>
                                        <td>L</td>
                                        <td>3 pcs</td>
                                        <td>₹110.00</td>
                                        <td>5%</td>
                                        <td>₹330.00</td>
                                        <td>₹346.50</td>
                                    </tr>
                                    <tr>
                                        <td>4</td>
                                        <td>Polo T-Shirt</td>
                                        <td>M</td>
                                        <td>1 pcs</td>
                                        <td>₹150.00</td>
                                        <td>5%</td>
                                        <td>₹150.00</td>
                                        <td>₹157.50</td>
                                    </tr>
                                    <tr>
                                        <td>5</td>
                                        <td>Polo T-Shirt</td>
                                        <td>L</td>
                                        <td>2 pcs</td>
                                        <td>₹155.00</td>
                                        <td>5%</td>
                                        <td>₹310.00</td>
                                        <td>₹325.50</td>
                                    </tr>
                                    <tr>
                                        <td>6</td>
                                        <td>V-Neck T-Shirt</td>
                                        <td>S</td>
                                        <td>2 pcs</td>
                                        <td>₹95.00</td>
                                        <td>5%</td>
                                        <td>₹190.00</td>
                                        <td>₹199.50</td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>V-Neck T-Shirt</td>
                                        <td>M</td>
                                        <td>3 pcs</td>
                                        <td>₹98.00</td>
                                        <td>5%</td>
                                        <td>₹294.00</td>
                                        <td>₹308.70</td>
                                    </tr>
                                    <tr>
                                        <td>8</td>
                                        <td>V-Neck T-Shirt</td>
                                        <td>L</td>
                                        <td>1 pcs</td>
                                        <td>₹102.00</td>
                                        <td>5%</td>
                                        <td>₹102.00</td>
                                        <td>₹107.10</td>
                                    </tr>
                                    <tr>
                                        <td>9</td>
                                        <td>Hooded T-Shirt</td>
                                        <td>M</td>
                                        <td>1 pcs</td>
                                        <td>₹220.00</td>
                                        <td>5%</td>
                                        <td>₹220.00</td>
                                        <td>₹231.00</td>
                                    </tr>
                                    <tr>
                                        <td>10</td>
                                        <td>Hooded T-Shirt</td>
                                        <td>L</td>
                                        <td>2 pcs</td>
                                        <td>₹225.00</td>
                                        <td>5%</td>
                                        <td>₹450.00</td>
                                        <td>₹472.50</td>
                                    </tr>

                                    <tr>
                                        <td>11</td>
                                        <td>Graphic T-Shirt</td>
                                        <td>S</td>
                                        <td>2 pcs</td>
                                        <td>₹130.00</td>
                                        <td>5%</td>
                                        <td>₹260.00</td>
                                        <td>₹273.00</td>
                                    </tr>
                                    <tr>
                                        <td>12</td>
                                        <td>Graphic T-Shirt</td>
                                        <td>M</td>
                                        <td>3 pcs</td>
                                        <td>₹135.00</td>
                                        <td>5%</td>
                                        <td>₹405.00</td>
                                        <td>₹425.25</td>
                                    </tr>
                                    <tr>
                                        <td>13</td>
                                        <td>Graphic T-Shirt</td>
                                        <td>L</td>
                                        <td>1 pcs</td>
                                        <td>₹140.00</td>
                                        <td>5%</td>
                                        <td>₹140.00</td>
                                        <td>₹147.00</td>
                                    </tr>
                                    <tr>
                                        <td>14</td>
                                        <td>Full Sleeve T-Shirt</td>
                                        <td>M</td>
                                        <td>2 pcs</td>
                                        <td>₹180.00</td>
                                        <td>5%</td>
                                        <td>₹360.00</td>
                                        <td>₹378.00</td>
                                    </tr>
                                    <tr>
                                        <td>15</td>
                                        <td>Full Sleeve T-Shirt</td>
                                        <td>L</td>
                                        <td>3 pcs</td>
                                        <td>₹185.00</td>
                                        <td>5%</td>
                                        <td>₹555.00</td>
                                        <td>₹582.75</td>
                                    </tr>
                                    <tr>
                                        <td>16</td>
                                        <td>Sports T-Shirt</td>
                                        <td>S</td>
                                        <td>2 pcs</td>
                                        <td>₹160.00</td>
                                        <td>5%</td>
                                        <td>₹320.00</td>
                                        <td>₹336.00</td>
                                    </tr>
                                    <tr>
                                        <td>17</td>
                                        <td>Sports T-Shirt</td>
                                        <td>M</td>
                                        <td>2 pcs</td>
                                        <td>₹165.00</td>
                                        <td>5%</td>
                                        <td>₹330.00</td>
                                        <td>₹346.50</td>
                                    </tr>
                                    <tr>
                                        <td>18</td>
                                        <td>Sports T-Shirt</td>
                                        <td>L</td>
                                        <td>1 pcs</td>
                                        <td>₹170.00</td>
                                        <td>5%</td>
                                        <td>₹170.00</td>
                                        <td>₹178.50</td>
                                    </tr>
                                    <tr>
                                        <td>19</td>
                                        <td>Oversized T-Shirt</td>
                                        <td>XL</td>
                                        <td>2 pcs</td>
                                        <td>₹200.00</td>
                                        <td>5%</td>
                                        <td>₹400.00</td>
                                        <td>₹420.00</td>
                                    </tr>
                                    <tr>
                                        <td>20</td>
                                        <td>Oversized T-Shirt</td>
                                        <td>XXL</td>
                                        <td>1 pcs</td>
                                        <td>₹210.00</td>
                                        <td>5%</td>
                                        <td>₹210.00</td>
                                        <td>₹220.50</td>
                                    </tr>
                                </tbody>


                            </table>
                        </div>

                        <!-- ================= TAX & AMOUNT SUMMARY (BOXED) ================= -->
                        <div class="card border shadow-sm mb-4" style="border-radius:16px;">
                            <div class="card-body">

                                <div class="row g-4">

                                    <!-- ================= TAX BREAKUP ================= -->
                                    <div class="col-12 col-lg-7">
                                        <div class="h-100">

                                            <table class="table invoice-table align-middle text-center mb-0">
                                                <thead class="table-light">
                                                    <tr>
                                                        <th>CGST (2.5%)</th>
                                                        <th>SGST (2.5%)</th>
                                                        <th>IGST (5%)</th>
                                                        <th>Total Tax</th>
                                                    </tr>
                                                </thead>

                                                <tbody>
                                                    <tr>
                                                        <td>₹7.63</td>
                                                        <td>₹7.62</td>
                                                        <td>₹0.00</td>
                                                        <td class="fw-bold">₹15.25</td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                            <div class="col-md-8 mt-3">
                                                <p><strong>Amount in Words:</strong><br>
                                                    Four Hundred Five Rupees and Twenty Five Paise Only.</p>
                                                <p>Subject to jurisdiction</p>
                                            </div>

                                        </div>
                                    </div>

                                    <!-- ================= AMOUNT SUMMARY ================= -->
                                    <div class="col-12 col-lg-5">
                                        <div class="h-100">

                                            <table class="table table-bordered mb-0 text-end">
                                                <tbody>
                                                    <tr>
                                                        <th class="text-start">Gross Amount</th>
                                                        <td>₹410.00</td>
                                                    </tr>
                                                    <tr>
                                                        <th class="text-start">Discount</th>
                                                        <td>5%</td>
                                                    </tr>
                                                    <tr>
                                                        <th class="text-start">GST</th>
                                                        <td>₹15.25</td>
                                                    </tr>
                                                    <tr class="fw-bold table-light">
                                                        <th class="text-start">Total Amount</th>
                                                        <td>₹405.25</td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>



                        <!-- FOOTER -->
                        <div class="row mt-5">
                            <div class="col-md-6 ms-auto">
                                <div class="d-flex flex-column align-items-end">

                                    <p class="fw-bold mb-5">Authorized Signature</p>

                                    <div style="border-top:1px solid #000; width:220px;"></div>

                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <!-- ACTION -->
            <div class="text-center no-print mt-4">
                <button onclick="downloadPDF()" class="btn btn-danger px-4 py-2 fw-semibold submit-btn no-print">
                    <i class="bi bi-file-earmark-pdf"></i> Download PDF
                </button>
                <button class="btn btn-primary px-4 py-2 fw-semibold submit-btn" onclick="window.print()">
                    <i class="bi bi-printer"></i>
                    Print
                </button>
            </div>


        </main>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <script src="../assets/js/include.js"></script>
    <script src="../assets/js/script.js"></script>
    <script>
        function downloadPDF() {
            const element = document.querySelector('.invoice-container');

            // keep the boxed summary and signature together on the last page
            const summary = document.querySelector('.card.border.shadow-sm.mb-4');
            const signatureRow = document.querySelector('.row.mt-5');
            if (summary) summary.classList.add('keep-together');
            if (signatureRow) signatureRow.classList.add('keep-together');

            const opt = {
                margin: 6, // mm
                filename: 'invoice.pdf',
                image: {
                    type: 'jpeg',
                    quality: 0.98
                },
                html2canvas: {
                    scale: 2, // Higher = better quality
                    useCORS: true,
                    scrollY: 0
                },
                jsPDF: {
                    unit: 'mm',
                    format: 'a4',
                    orientation: 'portrait'
                },
                pagebreak: {
                    // prefer css rules, allow legacy fallback, and avoid splitting .keep-together
                    mode: ['css', 'legacy'],
                    avoid: ['.keep-together']
                }
            };

            html2pdf().set(opt).from(element).save();
        }
    </script>


</body>

</html>